{% extends "layout.html" %}

{% block title %}
    {{ article }}
{% endblock %}

{% block main %}


<div class="container mb-5">
    <div class="row jumbotron m-xs-1 rounded bg-white text-left">

        <div class="col-md-9 col-xs-6">
            <p class="" style="font-size: 2.5em; color: #017bff">
                {{ article }}
            </p>

            <p style="font-size: medium;">
                APA citation: <em>{{ citation }}</em>
            </p>

            <p style="font-size: medium;">
                Dcyphr-d by <font style="color: #017bff"><a href="/public/{{ summary[0]['user_id'] }}">@{{ username[0]["username"] }}</a></font>
            </p>

            <p style="font-size: medium;">
                Link to Original Article: <font style="color: #017bff"><a href="{{ link }}">{{ article }}</a></font>
            </p>

            <p>
                <b>See something wrong that you can fix?</b><br>

                <font style="color: #017bff"><a href="/edit/{{ doi }}"><i class="fa fa-edit fa-2x border-0"></i><br>Edit</a></font>
            </p>
        </div>


        <div class="col-md-3 col-xs-6 text-center text-secondary" style="font-size: 1.9em; padding-top: 10px">
            <form method="POST">
                {% if x == "true" %}
                <div><button class="btn btn-default bg-white pb-3" type="submit" name="like" value="like" disabled>
                    <i class="fa fa-chevron-up border-0 fa-lg" style="color: #017bff;"></i></button></div>
                <span style="">{{ likes }}</span>
                <div><button class="btn btn-default bg-white pt-3" type="submit" name="dislike" value="dislike" disabled>
                    <i class="fa fa-chevron-down border-0 fa-lg" style="color: #017bff;"></i></button></div>
                {% else %}
                <div><button class="btn btn-default bg-white" type="submit" name="like" value="like">
                    <i class="fa fa-chevron-up border-0 fa-lg" style="color: #017bff;"></i></button></div>
                <span style="">{{ likes }}</span>
                <div><button class="btn btn-default bg-white" type="submit" name="dislike" value="dislike">
                    <i class="fa fa-chevron-down border-0 fa-lg" style="color: #017bff;"></i></button></div>
                {% endif %}
            </form>

            <div class="my-3">
                <form method="POST">
                    <button class="btn btn-default bg-white" name="flag" value="flag">
                        <i class="fa fa-flag fa-2x border-0" style="color: #eb9534;"></i>
                        <div class="my-1" style="color: #3b3b39">Flag For Moderation</div>
                    </button>
                </form>
            </div>
        </div>
    </div>



    <div class="w-25 p-2 bg-light border border-dark ">
        <h1 class="" style="color: #017bff; text-weight: 500; font-size: 2.5em">Contents</h1>
        <ul class="ml-3 text-left" style="list-style: none;">
            {% for i in range(title_length) %}
            <li><a class="contentButton" href="#{{ titles[i] }}">{{ i + 1 }}.{{ titles[i] }}</a></li>
            {% endfor %}
        </ul>
    </div>

    <div class="container text-left">

        <div id="summary" class="p-3 my-3">
            <p class="pl-4 text-weight-light" style="line-height: 40px; font-size: 20px;">
                {{summary_actual | safe}}
            </p>
            <p class="pl-4 text-weight-light" style="line-height: 40px; font-size: 20px;">
                {% for i in range(method_length) %}
                <a href="/method/{{ method_id[i] }}">{{ methods_used[i] }}</a>
                {% endfor %}
            </p>
        </div>


    </div>

    <div class="container text-left">
        <div id="comments" class="p-3 my-3">
            <div class="mb-4 display-4 text-center">
                Comments
            </div>

            <form method="POST" class="form">
                <div class="sticky-top form-group row">
                    <label for="comment" class="col-xs-2 col-form-label">Leave a comment: </label>
                    <div class="col">
                        <input type="text" name="text" class="form-control text-wrap w-100" id="comment" placeholder="Write here...">
                    </div>
                    <div>
                        {% if y == "true" %}
                        <button class="btn btn-default" type="submit" value="{{doi}}" disabled>Submit</button>
                        {% else %}
                        <button class="btn btn-default" type="submit" value= "{{doi}}">Submit</button>
                        {% endif %}
                    </div>
                </div>
            </form>

            {% for comment in comments %}
            <div class="contanier">
                <div>
                    Posted by <span class="text-danger">@{{ comment['username'] }}</span> on <span class="text-danger">{{ comment['date'] }}</span>
                </div>
                <div class="m-3 bg-light rounded p-3">
                    {{ comment['comment'] }}
                </div>
            </div>

            <hr>
            {% endfor %}

        </div>
    </div>

</div>

{% endblock %}



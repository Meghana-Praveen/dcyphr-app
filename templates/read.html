{% extends "layout.html" %}

{% block title %}
    {{ article }}
{% endblock %}

{% block main %}



<div class="container mb-5">
    <div class="row jumbotron m-xs-1 rounded bg-white text-left">

        <div class="col-md-9 col-xs-6">
            <p class="" style="color: #017bff" id="title">
                {{ article }}
            </p>

            <p style="font-size: medium;">
                APA citation: <em>{{ citation }}</em>
            </p>

            <p style="font-size: medium;">
                Dcyphr-d by <font style="color: #017bff"><a href="/public/{{ summary[0]['user_id'] }}">@{{ username[0]["username"] }}</a></font>
            </p>

            <p style="font-size: medium;">
                Link to Original Article: <font style="color: #017bff"><a href="{{ link }}" target="_blank">{{ article }}</a></font>
            </p>

            <p>
                <b>See something wrong that you can fix?</b><br>

                <font style="color: #017bff"><a href="/edit/{{ doi }}"><i class="fa fa-edit fa-2x border-0"></i><br>Edit</a></font>
            </p>
            Share this summary:
            <a class="w-inline-block social-share-btn fb" href="https://www.facebook.com/sharer/sharer.php?u=&t=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.URL) + '&t=' + encodeURIComponent(document.URL)); return false;"><i style="color:#017bff" class="fa fa-facebook border-0 fa-lg"></i></a>
            <a class="w-inline-block social-share-btn tw" href="https://twitter.com/intent/tweet?" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=%20Check%20up%20this%20awesome%20content' + encodeURIComponent(document.title) + ':%20 ' + encodeURIComponent(document.URL)); return false;"><i style="color:#017bff" class="fa fa-twitter border-0 fa-lg"></i></a>
            <a class="w-inline-block social-share-btn lnk" href="http://www.linkedin.com/shareArticle?mini=true&url=&title=&summary=&source=" target="_blank" title="Share on LinkedIn" onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(document.URL) + '&title=' + encodeURIComponent(document.title)); return false;"><i style="color:#017bff"class="fa fa-linkedin border-0 fa-lg"></i></a>
            <a class="w-inline-block social-share-btn email" href="mailto:?subject=&body=:%20" target="_blank" title="Email" onclick="window.open('mailto:?subject=' + encodeURIComponent(document.title) + '&body=' + encodeURIComponent(document.URL)); return false;"><i style="color: #017bff" class="fa fa-envelope fa-lg border-0"></i></a>
            <a class="w-inline-block social-share-btn redd" href="http://www.reddit.com/submit?url=&title=" target="_blank" title="Submit to Reddit" onclick="window.open('http://www.reddit.com/submit?url=' + encodeURIComponent(document.URL) + '&title=' + encodeURIComponent(document.title)); return false;"><i style="color: #017bff" class="fa fa-reddit fa-lg border-0"></i></a>
        </div>


        <div class="col-md-3 col-xs-6 text-center text-secondary" style="font-size: 1.9em; padding-top: 10px">
            <form method="POST">
                {% if x == "true" %}
                <div><button class="btn btn-default bg-white pb-3" type="submit" name="like" value="like" disabled>
                    <i class="fa fa-chevron-up border-0 fa-lg" style="color: #017bff;"></i></button></div>
                <span style="">{{ likes }}</span>
                <div><button class="btn btn-default bg-white pt-3" type="submit" name="dislike" value="dislike" disabled>
                    <i class="fa fa-chevron-down border-0 fa-lg" style="color: #017bff;"></i></button></div>
                {% else %}
                <div><button class="btn btn-default bg-white" type="submit" name="like" value="like">
                    <i class="fa fa-chevron-up border-0 fa-lg" style="color: #017bff;"></i></button></div>
                <span style="">{{ likes }}</span>
                <div><button class="btn btn-default bg-white" type="submit" name="dislike" value="dislike">
                    <i class="fa fa-chevron-down border-0 fa-lg" style="color: #017bff;"></i></button></div>
                {% endif %}
            </form>

            <div class="my-3">
                <form method="POST">
                    <button class="btn btn-default bg-white" name="flag" value="flag">
                        <i class="fa fa-flag fa-2x border-0" style="color: #eb9534;"></i>
                        <div class="my-1" style="color: #3b3b39">Flag For Moderation</div>
                    </button>
                </form>
            </div>
        </div>
    </div>



    <div class="p-2 bg-light border border-dark" id="content-box">
        <h1 class="" style="color: #017bff; text-weight: 500;" id="title">Contents</h1>
        <ul class="ml-3 text-left" style="list-style: none;">
            {% for i in range(title_length) %}
            <li><a class="contentButton" href="#{{ titles[i] }}">{{ i + 1 }}.{{ titles[i] }}</a></li>
            {% endfor %}
        </ul>
    </div>

    <div class="container text-left">

        <div id="summary" class="p-3 my-3">
            <p class="pl-4 text-weight-light" style="line-height: 40px; font-size: 20px;">
                {{summary_actual | safe}}
            </p>
            <p class="pl-4 text-weight-light" style="line-height: 40px; font-size: 20px;">
                {% for i in range(method_length) %}
                <a href="/method/{{ method_id[i] }}">{{ methods_used[i] }}</a>
                {% endfor %}
            </p>
        </div>


    </div>

    <div class="container text-left">
        <div id="comments" class="p-3 my-3">
            <div class="mb-4 display-4 text-center" id="title" style="color: #017bff">
                Comments
            </div>

            <form method="POST" class="form">
                <div class="sticky-top form-group row">
                    <label for="comment" class="col-xs-2 col-form-label"><b>Leave a comment:</b> </label>
                    <div class="col">
                        <input type="text" name="comment" class="form-control text-wrap w-100" id="comment" placeholder="Write here...">
                    </div>
                    <div>
                        {% if y == "true" %}
                        <button class="btn btn-default" type="submit" value="{{doi}}" disabled>Post</button>
                        {% else %}
                        <button class="btn btn-default" type="submit" value="{{doi}}">Post</button>
                        {% endif %}
                    </div>
                </div>
            </form>

            {% for comment in comments %}
            {% if comment['reply'] == 1 and comment['last'] == 1 %}

                <div class="container" style="width: 80%">
                    <div>
                        {{ comment['comment'] }} &mdash; <span class="text-danger"> <a href="/public/{{ comment['user_id'] }}">{{ comment['username'] }}</a></span> on <span class="text-danger">{{ comment['date'] }}</span>
                        <!--{% if y == "true" %}
                            <button style="float: right;" class="btn btn-default" type="submit" name="like" value="like" disabled>Like</button>
                        {% else %}
                            <button style="float: right;" class="btn btn-default bg-white btn-sm" type="submit" name="dislike_comment" value="dislike_comment">
                                <i class="fa fa-thumbs-o-down" style="color: #017bff;"></i></button>
                            <span style="float: right;">{{ comment['likes'] }}</span>
                            <button style="float: right;" class="btn btn-default bg-white btn-sm" type="submit" name="like_comment" value="like_comment">
                                <i class="fa fa-thumbs-o-up" style="color: #017bff;"></i></button>
                        {% endif %}-->


                    <button class="btn btn-default bg-white" data-toggle="collapse" data-target="#reply{{ comment['comment_id'] }}{{ comment['reply'] }}" style="color: DodgerBlue;"><i class="fa fa-reply-all border-0 fa-lg"></i>  Reply</button>

</div>

                    <form method="POST" class="collapse" id="reply{{ comment['comment_id'] }}{{ comment['reply'] }}">
                        <div class="sticky-top form-group row">
                            <div class="col">
                                <input type="text" name="reply" class="form-control text-wrap w-100" id="reply" placeholder="Reply here...">
                            </div>
                            <div>
                            {% if y == "true" %}
                                <button class="btn btn-default" type="submit" value="{{ comment['id'] }}" disabled>Post</button>
                            {% else %}
                                <button class="btn btn-default" type="submit" name="comment_button" value="{{ comment['comment_id'] }}">Post</button>
                            {% endif %}
                            </div>
                        </div>
                    </form>
                </div>
            {% elif comment['reply'] == 1 %}
                <div class="container" style="width: 80%">
                    <div>
                       {{ comment['comment'] }} &mdash; <span class="text-danger"> <a href="/public/{{ comment['user_id'] }}">{{ comment['username'] }}</a></span> on <span class="text-danger">{{ comment['date'] }}</span>
                        <!--{% if y == "true" %}
                            <button style="float: right;" class="btn btn-default" type="submit" name="like" value="like" disabled>Like</button>
                        {% else %}
                            <button style="float: right;" class="btn btn-default bg-white btn-sm" type="submit" name="dislike_comment" value="dislike_comment">
                                <i class="fa fa-thumbs-o-down" style="color: #017bff;"></i></button>
                            <span style="float: right;">{{ comment['likes'] }}</span>
                            <button style="float: right;" class="btn btn-default bg-white btn-sm" type="submit" name="like_comment" value="like_comment">
                                <i class="fa fa-thumbs-o-up" style="color: #017bff;"></i></button>
                        {% endif %}-->
                    </div>


                    <!--<form method="POST" class="form">
                        <div class="sticky-top form-group row">
                            <label for="reply" class="col-xs-2 col-form-label">Want to reply? </label>
                            <div class="col">
                                <input type="text" name="reply" class="form-control text-wrap w-100" id="reply" placeholder="Reply here...">
                            </div>
                            <div>
                            {% if y == "true" %}
                                <button class="btn btn-default" type="submit" value="{{ comment['id'] }}" disabled>Submit</button>
                            {% else %}
                                <button class="btn btn-default" type="submit" name="comment_button" value="{{ comment['comment_id'] }}">Submit</button>
                            {% endif %}
                            </div>
                        </div>
                    </form>-->
                </div>
            {% else %}
                <div class="container">
                    <div>
                         {{ comment['comment'] }} &mdash;<span class="text-danger"><a href="/public/{{ comment['user_id'] }}"> {{ comment['username'] }}</a></span>  on <span class="text-danger">{{ comment['date'] }}</span>
                        <!--{% if y == "true" %}
                            <button style="float: right;" class="btn btn-default" type="submit" name="like" value="like" disabled>Like</button>
                        {% else %}
                            <button style="float: right;" class="btn btn-default bg-white btn-sm" type="submit" name="dislike_comment" value="dislike_comment">
                                <i class="fa fa-thumbs-o-down" style="color: #017bff;"></i></button>
                            <span style="float: right;">{{ comment['likes'] }}</span>
                            <button style="float: right;" class="btn btn-default bg-white btn-sm" type="submit" name="like_comment" value="like_comment">
                                <i class="fa fa-thumbs-o-up" style="color: #017bff;"></i></button>
                        {% endif %}-->


                    <button class="btn btn-default bg-white" data-toggle="collapse" data-target="#reply{{ comment['comment_id'] }}{{ comment['reply'] }}" style="color: DodgerBlue;"><i class="fa fa-reply-all border-0 fa-lg"></i>  Reply</button>
</div>


                    <form method="POST" class="form collapse hide" id="reply{{ comment['comment_id'] }}{{ comment['reply'] }}">
                        <div class="sticky-top form-group row">

                            <div class="col">
                                <input type="text" name="reply" class="form-control text-wrap w-100" id="reply" placeholder="Reply here...">
                            </div>
                            <div>
                            {% if y == "true" %}
                                <button class="btn btn-default" type="submit" value="{{ comment['id'] }}" disabled>Post</button>
                            {% else %}
                                <button class="btn btn-default" type="submit" name="comment_button" value="{{ comment['comment_id'] }}">Post</button>
                            {% endif %}
                            </div>
                        </div>
                    </form>
                </div>
            {% endif %}

            <hr>
            {% endfor %}

        </div>
    </div>

</div>

{% endblock %}
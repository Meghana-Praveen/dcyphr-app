{% extends "layout.html" %}


{% block summernote %}
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.15/dist/summernote-bs4.min.css" rel="stylesheet" defer>
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.15/dist/summernote-bs4.min.js" defer></script>
<script>
        var HelloButton = function (context) {
            var ui = $.summernote.ui;

            // create button
            var button = ui.button({
                contents: '<i class="fa fa-wikipedia-w border-0"/></i>',
                tooltip: 'Link to any Wiki page',
                click: function () {
                 // invoke insertText method with 'hello' on editor module.
                var highlight = window.getSelection();
                var html = "<a href='https://en.wikipedia.org/wiki/" + highlight + "' target='_blank'>" + highlight + "</a>";
                context.invoke('editor.pasteHTML', html);
            }
            }  );

            return button.render();   // return button as jquery object
        };

        var removeHighlights = function(context){
            var ui = $.summernote.ui;

            // create button
            var button = ui.button({
                contents: '<i class="fa fa-eraser border-0"/></i>',
                tooltip: 'Remove readability suggestions',
                click: function () {
                 // invoke insertText method with 'hello' on editor module.
                var highlight = $('#summernote').summernote('code');
                var html = highlight.replace(/adverb|passive|veryHardSentence|complex|hardSentence/g, "");
                $('#summernote').summernote('code', html);
                
            }
            }  );

            return button.render();
        }





    $(document).ready(function() {
        $('#summernote').summernote({
        toolbar: [
        ['style', ['style']],
        ['font', ['bold', 'underline', 'clear']],
        ['fontname', ['fontname']],
        ['color', ['color']],
        ['para', ['ul', 'ol', 'paragraph']],
        ['table', ['table']],
        ['insert', ['link', 'picture', 'video']],
        ['view', ['fullscreen', 'codeview', 'help']], ['mybutton', ['wiki', 'comment']]
        ],
        buttons: {
            wiki: HelloButton,
            comment: removeHighlights
        }
        });
    });
</script>
<script>
    $(document).ready(function() {
        $("#summernote").summernote();
    });
</script>
{% endblock %}


{% block title %}
    {{ article[0]["article"] }}
{% endblock %}

{% block main %}


<script type="text/javascript" src="{{ url_for('static', filename='hemingway.js') }}"></script>

<div class="p-0 mx-0 w-100" style="">
    <div class="mx-5 text-left" style="">
        <div class="row jumbotron m-xs-1 rounded bg-white text-left">

            <div class="col-md-10 col-xs-6">
                <p class="display-4" style="color: #017bff; font-size:2.5em; font-family:Lato">
                    {{ article[0]["article"] }}
                </p>


                <p style="font-size: medium;">
                    Link to Original Article: <font color="#017bff"><a href="{{ article[0]['link'] }}" target="_blank">{{ article[0]["article"] }}</a></font>
                </p>
            </div>


        </div>
    </div>


    <div class="mx-5 text-left" style="">
        <div class="row">

            <div id="format" class="col col-lg-2">
                <div style="text-align: center">
                    <p class="font-weight-bold">Readability</p>
                    <div id="level" style="color: green">
                        Use our readability tool!
                    </div>
                </div>
                <div id="adverb" class="adverb counter"># of adverbs</div>
                <div id="passive" class="passive counter"># of passive voice</div>
                <div id="complex" class="complex counter"># of complex sentences</div>
                <div id="hardSentence" class="hardSentence counter"># of hard sentences</div>
                <div id="veryHardSentence" class="veryHardSentence counter"># of very hard sentences</div>

            </div>
            <div class="col">

                <div class="mr-auto d-inline text-center w-25">
                    <button class="btn btn-default bg-white" onclick="format()" style="color: DodgerBlue;">Test Readability</button>
                    <button class="btn btn-default bg-white" style="color: DodgerBlue;" data-toggle="collapse" data-target="#format">Toggle Readability</button>
                </div>

                <div class="ml-auto d-inline float-right text-center">
                    <button class="btn btn-default bg-white" data-toggle="collapse" data-target="#guidelines" style="color: DodgerBlue;">
                        <span class="d-none d-lg-flex">Toggle Guidelines</span>
                        <span class="d-flex d-lg-none">Below</span>
                    </button>
                </div>

                <form method="POST" action="/submission/{{ summary_id }}">
                    <textarea id="summernote" name="summary">{{summary}}</textarea>
                    <div>
                        <div class="container text-center">
                            <button class="btn btn-outline-secondary border20 my-3" type="submit" name="submit_button" value="save">Save</button>
                            <button class="btn btn-outline-primary border20 my-3" type="submit" name="submit_button" value="finish">Finish</button>
                        </div>
                    </div>
                </form>

            </div>


            <div class="col-12 col-lg-4 collapse show" id="guidelines">
                <h2 style="color: DodgerBlue">Guidelines</h2>
                <ol class="p-2" style="font-size: 0.9em;">
                    <li class="mb-3">
                        <p class="mb-1">Minimize normalization. Don't use words that are not nouns as nouns.</p>
                        <p class="mb-1 pl-2">Nominalized: The commencement of the ceremony will begin at noon.</p>
                        <p class="mb-1 pl-2">Better: The ceremony will commence at noon.</p>
                    </li>
                    <li class="mb-3">
                        <p class="mb-1">Keep subjects near verbs near objects.</p>
                    </li>
                    <li class="mb-3">
                        <p class="mb-1">Use simple word substitutions. (Under 3 Syllables)</p>
                    </li>
                    <li class="mb-3">
                        <p class="mb-1">Restrict sentences to one idea per sentence.</p>
                    </li>
                    <li class="mb-3">
                        <p class="mb-1">Make dependent clauses that appear in a middle of a sentence a separate sentence.</p>
                        <p class="mb-1 pl-2"><strong>Example:</strong> The ball, which was blue, rolled down the hill.</p>
                        <p class="mb-1 pl-2"><em>Better:</em> The ball was blue. It rolled down the hill.</p>
                        <p class="mb-1 pl-2"><em>Best:</em> The blue ball rolled down the hill.</p>
                    </li>
                    <li class="mb-3">
                        <p class="mb-1">Qualify all the pronouns you use.</p>
                    </li>
                    <li  class="mb-3">
                        <p class="mb-1">Introduce paragraphs with main idea sentence.</p>
                    </li>
                    <li  class="mb-3">
                        <p class="mb-1">State only the ideas of the original text.</p>
                    </li>
                </ul>


            </div>

        </div>
    <div class="mx-auto">
        <button class="btn btn-default" data-target="#tool" data-toggle="collapse" style="color: #017bff">Use our AI tool!</button>
    </div>

    {% if request.args.get('z') or z %}
    <div id="tool" class="show">
    {% else %}
    <div id="tool" class="collapse">
    {% endif %}


    <div class="row">
        <div class="col-6">
            <div class="card mx-auto">
                <form method="POST" action="/ai/{{ summary_id }}"style="margin:20px; text-align: left;">
                    <div class="form-group">
                        <label for="text" class="font-weight-bold text-muted" style="font-size:12px">Input section</label>
                        <textarea name="text" id="text" class="w-100 form-control" id="input"></textarea>
                    </div>

                    <input type="submit" class="btn btn-outline-primary border20 btn-block" value="Continue">
                </form>
            </div>
        </div>
        <div class="col-6">
            <div class="card mx-auto">
                <div class="col-sm-12">
                    <p class="font-weight-bold text-muted" style="font-size:12px; padding-top: 20px" id="output">Output</p>
                <div class="col" style="text-align: left; padding: 20px; padding-top: 0px">
                    <div class="border-left border-primary bg-light" style="padding:20px">
                    <p>{{ request.args.get('output') }}</p>
                    </div>
                </div>
        </div>
    </div>
</div>
</div>
</div>
</div>
<script defer>
    $(document).ready(function() {
        $("#summernote").summernote();
    });
</script>
{% endblock %}

